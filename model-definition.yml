kind: M
api_version: v1beta2
metadata:
  display_name: ToolSet:OpenCLIP
  name: toolset-openclip
  summary: A utility tool for clipping spatial data
  publisher: Newcastle University
  source_code: https://github.com/JamesVirgo/tools-clip
  description: >
    Allows spatial datasets to be clipped. All input data should use the same coordinate system, and this will be adopted by the output dataset(s). Where the coordinate system for a dataset can't be found, the tool will end and the logfile should be checked for details. When performing a clip using a boundary dataset for the clip, the tool will end if the coordinate system of the input data and the clip data do not match - this will be reported in the logfile. Uses GDAL methods to perform the transformations.
spec:
  inputs:
    parameters:
      - name: output_file
        title: Output file name
        description: The name to be given to the output file - only used if one input file passed, otherwise overridden and the default behaviour used. By default, and if multiple input files set, '_clip' will be appended to the name of the input dataset for the output file name.
        type: string
        required: false
        default: 'None'
      - name: extent
        title: extent
        type: string
        description: Should be formatted as `<xmin>,<ymin>,<xmax>,<ymax>` and in the same coordinate system as the data to clip.
        default: 'None'
        required: false
      - name: clip_to_extent_bbox
        title: How to clip data to clip spatial file
        type: string
        description: If passing a vector file for the clip extent, clip to outline or clip to bounding box of vector data
        default: clip-to-bounding-box
        required: false
        options:
          - name: clip-to-bounding-box
            title: clip-to-bounding-box
          - name: clip-to-vector-outline
            title: clip-to-vector-outline
      - name: save_logfile
        title: save logfile
        type: string
        description: Save logfile
        default: 'False'
        required: false
        options:
          - name: 'False'
            title: False
          - name: 'True'
            title: True
    dataslots:
      - name: Input data files
        description: Any data files which are to be clipped. Should match common data formats (rasters - .asc, .tiff, .geotiff; vector - .gpkg, .shp . geojson)
        path: inputs/clip
        required: true
        default: 
          - 0e02e891-286d-4973-a647-d0af19935d55
          - c66b2439-47e9-4cf8-b9c3-b1d9f061a9cb
          - 535ad7ad-ac1a-47ea-8a84-ff27156fd96b
          - fbce49c1-8f70-4304-8854-e8f89f5a4c1c
          - e190d35d-4fd9-4c9e-98e5-4f9d01ee9c24
          - 270a7199-a0e1-4eaf-acb2-4f22e8836df0
          - e8beb36f-dc71-4f21-a8e7-368355319f9e
          - 67f5fb08-fb83-45a2-a99d-0afab6ca0fb7
      - name: Clip extent file
        description: Either a spatial file to clip the input data with (GeoPackage or shapefile) or a text file defining the extent of the bounding box for the clip process.
        path: inputs/clip_extent
        default:          
          - 4ce97039-9746-4fb8-aede-3b0c86d2851f
        required: false

  outputs:
    datasets:
      - name: outputs/*.asc
        type: folder
        description: path to processed data outputs
      - name: outputs/*.log
        type: Text
        description: log file
